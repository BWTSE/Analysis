---
title: "Documentation"
output: html_notebook
---

```{r}
d.completed %>%
  ggplot(aes(high_debt_version, fill = documentation)) +
  geom_bar(position = "fill") +
  scale_y_reverse() +
  scale_fill_manual("legend", values = c("Correct" = "green", "None" = "yellow", "Incorrect" = "red"), guide = guide_legend(reverse = TRUE))
```


```{r}
documentation0 <- brm(
  documentation ~ 1
  + high_debt_version
  + (1 | c | session),
  family = categorical(),
  data = as.data.frame(d.completed),
  prior = c(
    prior(normal(0, 0.9), class = "b"),
    prior(normal(0, 0.9), class = "Intercept"),
    prior(exponential(1), class = "sd", dpar = "muIncorrect"),
    prior(exponential(1), class = "sd", dpar = "muNone"),
    prior(lkj(2), class = "L")
  ),
  # empty = TRUE, # If you only want to check prior definitions
  # sample_prior = "only",
  backend = "cmdstanr",
  chains = 4,
  cores = 4,
  file = "fits/documentation0",
  file_refit = "on_change"
)

pp_check(documentation0, nsamples = 200, type = "bars")

summary(documentation0)
```

```{r}
documentation0.with <- extendable_model(
  base_name = "documentation0",
  base_formula = "documentation ~ 1 + high_debt_version + (1 | c | session)",
  base_priors = c(
    prior(normal(0, 0.9), class = "b"),
    prior(normal(0, 0.9), class = "Intercept"),
    prior(exponential(1), class = "sd", dpar = "muIncorrect"),
    prior(exponential(1), class = "sd", dpar = "muNone"),
    prior(lkj(2), class = "L")
  ),
  family = categorical(),
  data = d.completed
)
```



```{r}
documentation0.work_domain <- documentation0.with("work_domain")

summary(documentation0.work_domain)
```
```{r}
documentation0.work_experience_programming <- documentation0.with("work_experience_programming.s")

summary(documentation0.work_experience_programming)
```


```{r}
documentation0.work_experience_java <- documentation0.with("work_experience_java.s")

summary(documentation0.work_experience_java)
```

```{r}
documentation0.education_field <- documentation0.with("education_field")

summary(documentation0.education_field)
```

```{r}
documentation0.education_level <- documentation0.with(
  "mo(education_level)", 
  c(
    prior(dirichlet(2), class = "simo", coef = "moeducation_level1", dpar = "muIncorrect"),
    prior(dirichlet(2), class = "simo", coef = "moeducation_level1", dpar = "muNone")
  )
)

summary(documentation0.education_level)
```
```{r}
documentation0.workplace_peer_review <- documentation0.with("workplace_peer_review")

summary(documentation0.workplace_peer_review)
```

```{r}
documentation0.workplace_td_tracking <- documentation0.with("workplace_td_tracking")

summary(documentation0.workplace_td_tracking)
```

```{r}
documentation0.workplace_pair_programming <- documentation0.with("workplace_pair_programming")

summary(documentation0.workplace_pair_programming)
```

```{r}
documentation0.workplace_coding_standards <- documentation0.with("workplace_coding_standards")

summary(documentation0.workplace_coding_standards)
```

```{r}
documentation0.scenario <- documentation0.with("scenario")

summary(documentation0.scenario)
```

```{r}
documentation0.group <- documentation0.with("group")

summary(documentation0.group)
```

```{r}

loo(
  documentation0,
  documentation0.work_domain,
  documentation0.work_experience_programming,
  documentation0.work_experience_java,
  documentation0.education_field,
  documentation0.education_level,
  documentation0.workplace_peer_review,
  documentation0.workplace_td_tracking,
  documentation0.workplace_pair_programming,
  documentation0.workplace_coding_standards,
  documentation0.scenario,
  documentation0.group
)
```
